<%- include('../layout/head')%>
<link rel="stylesheet" href="/css/forms.css">
<link rel="stylesheet" href="/css/auth.css">
</head>

<body>
  <%- include('../layout/navigation')%>
  <main>
    <% if(errorMessage) { %>
    <div class='user-message user-message--error' id='error-message'><%= errorMessage %></div>
    <% } %>
    <% if(sessionInitError) { %>
    <div class='user-message user-message--error' id='error-message'><%= sessionInitError %></div>
    <% } %>
    <form class="login-form" action="/login" method="POST">
      <div class="form-control">
        <label for="email">E-mail</label>
        <input id="email" name="email" type="email" required />
      </div>
      <div class="form-control">
        <label for="password">Password</label>
        <input id="password" name="password" type="password" required />
      </div>
      <input type='hidden' name='_csrf' value='<%= csrfToken %>' />
      <button class='btn' type="submit">Login</button>
    </form>
  </main>

  <!-- Include the external script -->
  <!-- hideFlash.js is not within the scoipe of nodejs. In order to pass a dot.env attribute we need to inject into the site an exctension script to hideFlash.js -->
  <script>
    window.FLASH_REMOVE_DELAY = <%- flashRemoveDelay %>
  </script>

  <script src="/js/hideFlash.js"></script>

  <%- include('../layout/end')%>